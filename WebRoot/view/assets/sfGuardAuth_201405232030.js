$(document).ready(function(){if($("#login_form").length>0){$("#login_form").validate({rules:{"signin[username]":{required:true},"signin[password]":{required:true}},messages:{"signin[username]":{required:"请填写用户名"},"signin[password]":{required:"请填写密码"}},errorPlacement:function(a,b){a.insertBefore(b)},errorElement:"div",errorClass:"logreg-error",submitHandler:function(a){$("#login_btn").interactBtn();a.submit()}})}$("#show_qr").on("click",function(){_gaq.push(["_trackEvent","show_qr",$(this).attr("data-target")]);$("#modal_qr").modal()})});$(document).ready(function(){$.validator.addMethod("phone",function(b,a){return !REG.MOBILE.test(b)},"请勿使用手机号码作为用户名");if($("#register_form").length>0){$("#register_form").validate({rules:{"sf_guard_user[username]":{required:true,phone:true,rangelength:[5,16],remote:"/api/checkUsername"},"sf_guard_user[password]":{required:true,rangelength:[6,20]},"sf_guard_user[repeatPassword]":{required:true,equalTo:"#sf_guard_user_password"},"sf_guard_user[email]":{required:true,email:true,remote:"/api/checkEmail"},agreement:{required:true}},messages:{"sf_guard_user[username]":{required:"必填项",phone:"请勿使用手机号作为用户名",rangelength:"用户名必须在5到16位字符之间",remote:"用户名已被使用"},"sf_guard_user[password]":{required:"必填项",rangelength:"密码长度必须在6到20位之间"},"sf_guard_user[repeatPassword]":{required:"两次密码输入不一致",equalTo:"两次密码输入不一致"},"sf_guard_user[email]":{required:"必填项",email:"请输入正确的Email地址",remote:"Email地址已被使用"},agreement:{required:'不同意我们的使用条款吗？来<a href="/feedback" title="反馈留言">反馈留言</a>告诉我们您的理由吧'}},errorPlacement:function(a,b){if(b.attr("type")=="checkbox"){a.insertAfter("#register_btn")}else{a.insertBefore(b)}},errorElement:"div",errorClass:"logreg-error",submitHandler:function(a){$("#register_btn").interactBtn();a.submit()}})}$(".switch_form").on("click",function(){$(this).parents("form").addClass("hide").siblings("form").removeClass("hide")})});